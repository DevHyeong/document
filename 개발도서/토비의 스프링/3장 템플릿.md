# 3장 템플릿
- 템플릿이란 변하지 않는 부분을 변하는 부분으로부터 독립시켜서 효과적으로 활용할 수 있는 방법

## 변하는 것과 변하지 않는 것
### 템플릿 메소드 패턴
- 상속을 통해 기능을 확장해서 사용하는 부분
- 변하지 않는 부분은 슈퍼클래스에 두고 변하는 부분은 추상 메소드로 정의해둬서 서브클래스에서 오버라이드하여 새롭게 정의해 쓰도록 하는 것이다.
- 슈퍼클래스와 서브클래스와의 관계가 컴파일 시점에 결정된다.

### 전략 패턴
- 컨텍스트가 어떤 전략을 사용할 것인가는 컨텍스트를 사용하는 클라이언트가 결정하는게 일반적이다.
- 클라이언트가 구체적인 전략의 하나를 선택하여 오브젝트로 만들어서 컨텍스트에 전달하는 것이다.
- 컨텍스트는 전달받은 구현 클래스의 오브젝트를 사용한다.

### 예제코드인 UserDAO에 전략패턴 적용시 두가지 문제
- DAO 메소드마다 새로운 StatementStrategy 구현 클래스를 만들어야 한다. (클래스 갯수 증가 문제)
- DAO 메소드에서 StatementStrategy에 전달할 User와 같은 부가적인 정보가 있을 경우 오브젝트를 전달받는 생성자와 인스턴스 변수를 만들어야 한다.

### 해결법
- 중첩 클래스(다른 클래스 내부에 정의되는 클래스) 사용

중첩 클래스의 종류
- 스태틱 클래스: 독립적으로 오브젝트를 만들수 있는 클래스
- 내부 클래스: 자신이 정의된 클래스의 오브젝트 안에서만 만들어질 수 있는 클래스
  - 멤버 내부 클래스: 멤버 필드처럼 오브젝트 레벨에 정의되는 클래스
  - 로컬 클래스: 메소드 레벨에 정의되는 클래스
  - 익명 내부 클래스: 이름을 갖지 않는 클래스

## 의존관계 주입(DI)
- 인터페이스를 사이에 둬서 클래스 레베렝서는 의존관계가 고정되지 않게 하고 런타임 시에 의존할 오브젝트와의 관계를 다이내믹하게 주입해주는 것이 맞다.
- 그러나 스프링의 DI는 넓게 보자면 객체의 생성과 관계설정에 대한 제어권한을 오브젝트에서 제거하고 외부로 위임했다는 IoC라는 개념을 포괄한다.
- DI를 위해서는 주입되는 오브젝트와 주입받는 오브젝트 양쪽 모두 스프링 빈으로 등록돼야 한다. (스프링이 생성하고 관리하는 IoC 대상이어야 DI에 참여할 수 있기 때문이다.)

## 템플릿과 콜백
- 전략 패턴의 컨텍스트를 템플릿이라 부르고, 익명 내부 클래스로 만들어지는 오브젝트를 콜백이라고 부른다.
- 클라이언트가 템플릿 메소드를 호출하면서 콜백 오브젝트를 전달하는 것은 메소드 레벨에서 일어나는 DI다.
- 템플릿/콜백 방식은 매번 메소드 단위로 사용할 오브젝트를 새롭게 전달받는다는 것이 특징이다.

### 템플릿/콜백 패턴 적용
- 예제) 파일을 하나 열어서 모든 라인의 숫자를 더한 합을 돌려주는 코드 + 숫자를 곱한 합을 돌려주는 코드
- 먼저 템플릿에 담을 반복되는 작업 흐름은 어떤 것인지 살펴보자
- 템플릿이 콜백에게 전달해줄 내부의 정보는 무엇이고, 콜백이 템플릿에게 돌려줄 내용은 무엇인지도 생각해보자.
- 템플릿/콜백을 적용할 때는 템플릿과 콜백의 경계를 정하고 템플릿이 콜백에게, 콜백이 템플릿에게 각각 전달하는 내용이 무엇인지 파악하는게 가장 중요하다. 그에 따라 콜백의 인터페이스를 정의해야 하기 때문이다.

## 스프링의 JdbcTemplate
- 
